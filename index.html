<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>THE ICONIC LAB</title>
<!-- CSS -->
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
<!-- END CSS -->
  </head>
  <body>
    <div class="container">
    <div class="text-center">

      <div style="background-color:#1a1a1a" class="">
        <h1 style="color:white">Hello world \m/</h1>
      </div><!-- /tittle -->

      <div class="row">
        <div class="col-lg-12">
          <div class="input-group">
            <input id="search" type="search" class="form-control" placeholder="enter a keyword">
            <span class="input-group-btn">
              <button id="search-btn" class="btn btn-success" type="button">Search</button>
            </span>
          </div><!-- /input-group -->
        </div><!-- /.col-lg-12 -->
      </div><!-- /.row -->

      <!--list-->
      <div class="row">
        <div class="col-lg-12">
            <div id="item_list">

            </div>
        </div><!-- /.col-lg-12 -->
      </div><!-- /.row -->
      <!--END list-->






    </div><!-- /text-center -->
    </div><!-- /container -->


  </body>
<!--JS CDN-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<!--END JS CDN-->
<!--HandMade JS-->
  <script type="text/javascript">
      //function to validate key pressed and search
        var search_keyup = function(e){(e.which == 13)?search():false;};
        var search = function(){
          var search_key = $("#search").val();
          iList.loadlist();
          $("#item_list").html(total_items);
        };
        //setting the button action
        $("#search").keyup(search_keyup);
        $("#search-btn").click(search);
        $("#search").focus();
      //END function to validate key pressed and search


      //item list definition
      var total_items = "";

      var add_item = function(name,price,sku,brand,imgsource,link){
                  //total_items += "<input id='"+number+"' type='search' class='form-control' placeholder='Im an item "+text1+"'>";
                    //console.log("dentro de add_item" + name + ".." + price + ".." + sku + ".." + brand + ".." + imgsource + ".." + link);
                  var temp_ = "<div class='row'> \
                          <div class='col-lg-12'> \
                          <div class='media'> \
                          <div class='media-left'> \
                          <a href='http://www.theiconic.com.au/"+link+"'>\
                          <img style='width: 200px' class='media-object' src='"+imgsource+"' alt='"+name+"'> \
                          </a> \
                          </div>\
                          <div class='media-right'> \
                          <h3>"+brand+"</h3> \
                          <h3 class='media-heading'>"+name+"</h3> \
                          <p>"+price+"</p> \
                          <p>"+sku+"</p> \
                          <p><a href='#' class='btn btn-primary' role='button'>Button</a> <a href='#' class='btn btn-default' role='button'>Button</a></p> \
                          </div><!-- /.caption --> \
                          </div><!-- /.thumbnail --> \
                        </div><!-- /.col-lg-12 --> \
                        </div><!-- /.row -->";
//console.log(temp_);
                  total_items += temp_;
                  return true;
                };

      //END item list definition

      var iList = (function(){
        var jsonlist = {};
        $.ajax({
          url: "https://eve.theiconic.com.au/v1/catalog/products?page=1&page_size=10",
          context: document.body
        }).done(function(data) {
          jsonlist = data._embedded.product;
          console.log(jsonlist);
          console.log(data);
        });
        var publicAPI = {
              loadlist: function(){
                //add_item(jsonlist[0].name,jsonlist[0].price,jsonlist.sku,jsonlist[0]._embedded.brand.name,jsonlist[0]._embedded.images[0].thumbnail,jsonlist[0].link);
                //alert(jsonlist[0]._embedded.images[0].thumbnail);
                for (var i = 0; i < 10; i++) {
                  add_item(jsonlist[i].name,jsonlist[i].price,jsonlist[i].sku,jsonlist[i]._embedded.brand.name,jsonlist[i]._embedded.images[0].thumbnail,jsonlist[i].link);
                };
              }
        };
        return publicAPI;
      })();


  </script>
<!--END HandMade JS-->
</html>
